![image](../img/timg.jpg)
<br>

## 前言

**按位操作符（Bitwise operators）** 将其操作数（operands）当作32位的比特序列（由0和1组成），而不是十进制、十六进制或八进制数值。

## 关于作者

一个工作八年的草根程序员。

## 内容

- 二进制表示整数
- js的按位操作符
- 位运算实际应用
  
### 一、二进制表示整数

ECMAScript整数有两种类型，即有符号整数（允许用整数和负数）和无符号整数（只允许用正数）.有ECMcript中，所有整数字面量默认都是有符号整数。

有符号整数使用 31 位表示整数的数值，用第 32 位表示整数的符号，0 表示正数，1 表示负数。数值范围从 -2147483648 到 2147483647。

正数是以真二进制形式存储的，前 31 位中的每一位都表示 2 的幂，从第 1 位（位 0）开始，表示 20，第 2 位（位 1）表示 21。没用到的位用 0 填充，即忽略不计。例如，下图展示的是数18的表示法。

![](./img/ct_js_integer_binary_signed_32bits.gif)

18 的二进制版本只用了前 5 位，它们是这个数字的有效位。把数字转换成二进制字符串，就能看到有效位：

```
var iNum = 18;
console.log(iNum.toString(2));      // 输出'10010'
```

这段代码只输出“10010”，而不是18的32位表示。其他的数位并不重要，因为仅使用前5位即可确定这个十进制数值。如下图所示：

![](./img/ct_js_integer_binary_number18.gif)

负数也存储为二进制代码，不过采用的形式是二进制补码。计算数字二进制补码的步骤有三步：

1. 确定该数字的非负版本的二进制表示（例如，要计算 -18的二进制补码，首先要确定 18 的二进制表示）
2. 求得二进制反码，即要把 0 替换为 1，把 1 替换为 0
3. 在二进制反码上加 1

要确定 -18 的二进制表示，首先必须得到 18 的二进制表示，如下所示：

```
0000 0000 0000 0000 0000 0000 0001 0010
```

接下来，计算二进制反码，如下所示：

```
1111 1111 1111 1111 1111 1111 1110 1101
```

最后，在二进制反码上加 1，如下所示：

```
1111 1111 1111 1111 1111 1111 1110 1101
                                      1
---------------------------------------
1111 1111 1111 1111 1111 1111 1110 1110
```

因此，-18 的二进制表示即 1111 1111 1111 1111 1111 1111 1110 1110。

有趣的是，把负整数转换成二进制字符串后，ECMAScript 并不以二进制补码的形式显示，而是用数字绝对值的标准二进制代码前面加负号的形式输出。例如：

```
var iNum = -18;
alert(iNum.toString(2));	//输出 "-10010"

```

所有的按位操作符的操作数都会被转成补码形式的有符号32位整数。

总结：

1. 二进制的最高位是符号位：0表示正数，1表示负数
2. 正数的原码、反码、补码都一样；
3. 负数的反码 = 它的原码符号位不变，其他位取反(0->1;1->0);
4. 负数的补码 = 它的反码+1;
5. 0的反码、补码都是0；
6. 在计算机运算的时候，都是以补码的方式来运算的；

### 二、js的按位操作符

- `~`（按位非）
- `&`（按位与）
- `|`（按位或）
- `^`（按位异或）
- `<<`（左移）
- `>>`（右移）
- `>>>`（无符号右移）

#### 1.1 `~`（按位非）

对每一个比特位执行**非（NOT）操作**。NOT `a` 结果为 `a` 的反转（即反码）。

```
```

#### 1.2 `&`（按位与）

```
```

#### 1.3 `|`（按位或）

```
```

#### 1.4 `^`（按位异或）

```
```

#### 1.5 `<<`（左移）

```
```

#### 1.6 `>>`（右移）

```
```

#### 1.7 `>>>`（无符号右移）

```
```

### 三、位运算实际应用



### 参考资料

- [JavaScript中按位操作符的有趣应用](https://mp.weixin.qq.com/s/_0bprYb2akIR3CqKVSwE4w)

## 联系作者

<div align="center">
    <p>
        平凡世界，贵在坚持。
    </p>
    <img src="../img/contact.png" />
</div>